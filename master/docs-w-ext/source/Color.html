<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* Copyright (c) 2016-present terrestris GmbH &amp; Co. KG
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
<span id='BasiGX-util-Color'>/**
</span> * @class BasiGX.util.Color
 */
Ext.define(&#39;BasiGX.util.Color&#39;, {

    statics: {

<span id='BasiGX-util-Color-static-method-hexToRgba'>        /**
</span>         * This method converts a hex color string into an rgba color string.
         *
         * Example:
         *
         *     var rgba = BasiGX.util.Color.hexToRgba(&quot;#ff0000&quot;, 0.5);
         *     // rgba is now: &quot;rgba(255,0,0,0.5)&quot;
         *
         * @param {String} hex The hex string to convert.
         * @param {Number} opacity The opacity to set, should be between `0` and
         *     `1`.
         * @return {String} A `rgba(r,g,b,a)` color string.
         */
        hexToRgba: function(hex, opacity) {
            hex = hex.replace(&#39;#&#39;, &#39;&#39;);
            var r = parseInt(hex.substring(0, 2), 16);
            var g = parseInt(hex.substring(2, 4), 16);
            var b = parseInt(hex.substring(4, 6), 16);
            var a = opacity;

            if (opacity) {
                return &#39;rgba(&#39; + r + &#39;,&#39; + g + &#39;,&#39; + b + &#39;,&#39; + a + &#39;)&#39;;
            }
            return &#39;rgba(&#39; + r + &#39;,&#39; + g + &#39;,&#39; + b + &#39;,1)&#39;;
        },

<span id='BasiGX-util-Color-static-method-hex8ToRgba'>        /**
</span>         * This method converts a hex color string into an rgba color string.
         *
         * Example:
         *
         *     var rgba = BasiGX.util.Color.hex8ToRgba(&quot;#ff000000&quot;);
         *     // rgba is now: &quot;rgba(255,0,0,0)&quot;
         *
         * @param {String} hex8 The hex8 string to convert.
         * @return {String} A `rgba(r,g,b,a)` color string.
         */
        hex8ToRgba: function(hex8) {
            hex8 = hex8.replace(&#39;#&#39;, &#39;&#39;);
            var r = parseInt(hex8.substring(0, 2), 16);
            var g = parseInt(hex8.substring(2, 4), 16);
            var b = parseInt(hex8.substring(4, 6), 16);
            var a = (parseInt(hex8.substring(6, 8), 16) / 255).toFixed(2) * 1;

            var result = &#39;rgba(&#39; + r + &#39;,&#39; + g + &#39;,&#39; + b + &#39;,&#39; + a + &#39;)&#39;;
            return result;
        },

<span id='BasiGX-util-Color-static-method-rgbaToHex'>        /**
</span>         * This method converts a rgba color string into an hex6 color string.
         * Warning: You will loose the alpha channel when using this method.
         *
         * Example:
         *
         *     var hex = BasiGX.util.Color.rgbaToHex(&quot;rgba(255,0,0,0)&quot;);
         *     // hex is now: &quot;#ff0000&quot;
         *
         * @param {String} rgba A `rgba(r,g,b,a)` color string.
         * @return {String} A hexadecimal color string, e.g. `#ff0000`.
         */
        rgbaToHex: function(rgba) {
            if (!rgba) {
                return &#39;&#39;;
            }
            // TODO we should have a utility rgbAsArray, just like we have
            // rgbaAsArray, or not?
            var regex = new RegExp(&#39;^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,&#39; +
                &#39;[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?&#39;, &#39;i&#39;);
            rgba = rgba.match(regex);

            if (!rgba || rgba.length !== 4) {
                return &#39;&#39;;
            }

            var makeHex = BasiGX.util.Color.makeHex;
            var r = makeHex(rgba[1]);
            var g = makeHex(rgba[2]);
            var b = makeHex(rgba[3]);

            return &#39;#&#39; + r + g + b;
        },

<span id='BasiGX-util-Color-static-method-rgbaToHex8'>        /**
</span>         * This method converts a rgba color string into an hex8 color string.
         *
         * Example:
         *     var hex = BasiGX.util.Color.rgbaToHex(&quot;rgba(255,0,0,0)&quot;);
         *     // hex is now: &quot;#ff000000&quot;
         *
         * @param {String} rgba A `rgba(r,g,b,a)` color string.
         * @return {String} A hex8 color string, with alpha; e.g. `#ff000000`.
         */
        rgbaToHex8: function(rgba) {
            if (!rgba) {
                return &#39;&#39;;
            }
            rgba = BasiGX.util.Color.rgbaAsArray(rgba);

            if (!rgba || rgba.length !== 5) {
                return &#39;&#39;;
            }

            var makeHex = BasiGX.util.Color.makeHex;
            var r = makeHex(rgba[1]);
            var g = makeHex(rgba[2]);
            var b = makeHex(rgba[3]);
            var a = makeHex(&#39;&#39; + Math.round(parseFloat(rgba[4]) * 255));

            return &#39;#&#39; + r + g + b + a;
        },

<span id='BasiGX-util-Color-static-method-makeHex'>        /**
</span>         * Returns the two digit hexadecimal value of the passed number string
         * (between `&#39;0&#39;` and `&#39;255&#39;`).
         *
         * @param {String} numStr The number to convert as a string.
         * @return {String} The hexadecimal number.
         */
        makeHex: function(numStr) {
            var hex = parseInt(numStr, 10).toString(16);
            return (&#39;0&#39; + hex).slice(-2);
        },

<span id='BasiGX-util-Color-static-method-rgbaAsArray'>        /**
</span>         * Returns an array of the parts of an `rgba(r,g,b,a)` string as array.
         * The index `1` will be `r`, `2` will be `g`, `3` will be `b` and
         * `4` will be `a`.
         *
         * @param {String} rgba An `rgba(r,g,b,a)` string.
         * @return {Array} An array with the parts of the rgba-string.
         */
        rgbaAsArray: function(rgba) {
            var regex = new RegExp(&#39;^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,&#39; +
                &#39;[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,&#39; +
                &#39;[\\s+]?(\\d+(?:\\.\\d+|))[\\s+]?&#39;, &#39;i&#39;);
            rgba = rgba.match(regex);
            return rgba;
        }
    }
});
</pre>
</body>
</html>
