<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">
var __cov_ycuTgTZmMYZ4lqID3Xabnw = (Function(&#39;return this&#39;))();
if (!__cov_ycuTgTZmMYZ4lqID3Xabnw.__coverage__) { __cov_ycuTgTZmMYZ4lqID3Xabnw.__coverage__ = {}; }
__cov_ycuTgTZmMYZ4lqID3Xabnw = __cov_ycuTgTZmMYZ4lqID3Xabnw.__coverage__;
if (!(__cov_ycuTgTZmMYZ4lqID3Xabnw[&#39;/home/travis/build/terrestris/BasiGX/src/view/combo/ScaleCombo.js&#39;])) {
   __cov_ycuTgTZmMYZ4lqID3Xabnw[&#39;/home/travis/build/terrestris/BasiGX/src/view/combo/ScaleCombo.js&#39;] = {&quot;path&quot;:&quot;/home/travis/build/terrestris/BasiGX/src/view/combo/ScaleCombo.js&quot;,&quot;s&quot;:{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:0,&quot;4&quot;:0,&quot;5&quot;:0,&quot;6&quot;:0,&quot;7&quot;:0,&quot;8&quot;:0,&quot;9&quot;:0,&quot;10&quot;:0,&quot;11&quot;:0,&quot;12&quot;:0,&quot;13&quot;:0,&quot;14&quot;:0,&quot;15&quot;:0,&quot;16&quot;:0,&quot;17&quot;:0,&quot;18&quot;:0,&quot;19&quot;:0,&quot;20&quot;:0,&quot;21&quot;:0,&quot;22&quot;:0,&quot;23&quot;:0,&quot;24&quot;:0,&quot;25&quot;:0,&quot;26&quot;:0,&quot;27&quot;:0,&quot;28&quot;:0,&quot;29&quot;:0,&quot;30&quot;:0,&quot;31&quot;:0,&quot;32&quot;:0,&quot;33&quot;:0,&quot;34&quot;:0},&quot;b&quot;:{&quot;1&quot;:[0,0],&quot;2&quot;:[0,0],&quot;3&quot;:[0,0],&quot;4&quot;:[0,0]},&quot;f&quot;:{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:0,&quot;4&quot;:0,&quot;5&quot;:0},&quot;fnMap&quot;:{&quot;1&quot;:{&quot;name&quot;:&quot;(anonymous_1)&quot;,&quot;line&quot;:119,&quot;loc&quot;:{&quot;start&quot;:{&quot;line&quot;:119,&quot;column&quot;:19},&quot;end&quot;:{&quot;line&quot;:119,&quot;column&quot;:30}}},&quot;2&quot;:{&quot;name&quot;:&quot;(anonymous_2)&quot;,&quot;line&quot;:159,&quot;loc&quot;:{&quot;start&quot;:{&quot;line&quot;:159,&quot;column&quot;:15},&quot;end&quot;:{&quot;line&quot;:159,&quot;column&quot;:26}}},&quot;3&quot;:{&quot;name&quot;:&quot;(anonymous_3)&quot;,&quot;line&quot;:170,&quot;loc&quot;:{&quot;start&quot;:{&quot;line&quot;:170,&quot;column&quot;:19},&quot;end&quot;:{&quot;line&quot;:170,&quot;column&quot;:40}}},&quot;4&quot;:{&quot;name&quot;:&quot;(anonymous_4)&quot;,&quot;line&quot;:184,&quot;loc&quot;:{&quot;start&quot;:{&quot;line&quot;:184,&quot;column&quot;:28},&quot;end&quot;:{&quot;line&quot;:184,&quot;column&quot;:42}}},&quot;5&quot;:{&quot;name&quot;:&quot;(anonymous_5)&quot;,&quot;line&quot;:215,&quot;loc&quot;:{&quot;start&quot;:{&quot;line&quot;:215,&quot;column&quot;:21},&quot;end&quot;:{&quot;line&quot;:215,&quot;column&quot;:42}}}},&quot;statementMap&quot;:{&quot;1&quot;:{&quot;start&quot;:{&quot;line&quot;:23,&quot;column&quot;:0},&quot;end&quot;:{&quot;line&quot;:223,&quot;column&quot;:3}},&quot;2&quot;:{&quot;start&quot;:{&quot;line&quot;:120,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:120,&quot;column&quot;:22}},&quot;3&quot;:{&quot;start&quot;:{&quot;line&quot;:122,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:124,&quot;column&quot;:9}},&quot;4&quot;:{&quot;start&quot;:{&quot;line&quot;:123,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:123,&quot;column&quot;:64}},&quot;5&quot;:{&quot;start&quot;:{&quot;line&quot;:125,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:125,&quot;column&quot;:39}},&quot;6&quot;:{&quot;start&quot;:{&quot;line&quot;:129,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:135,&quot;column&quot;:11}},&quot;7&quot;:{&quot;start&quot;:{&quot;line&quot;:137,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:137,&quot;column&quot;:30}},&quot;8&quot;:{&quot;start&quot;:{&quot;line&quot;:139,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:139,&quot;column&quot;:24}},&quot;9&quot;:{&quot;start&quot;:{&quot;line&quot;:142,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:142,&quot;column&quot;:45}},&quot;10&quot;:{&quot;start&quot;:{&quot;line&quot;:145,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:145,&quot;column&quot;:46}},&quot;11&quot;:{&quot;start&quot;:{&quot;line&quot;:148,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:150,&quot;column&quot;:10}},&quot;12&quot;:{&quot;start&quot;:{&quot;line&quot;:151,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:151,&quot;column&quot;:78}},&quot;13&quot;:{&quot;start&quot;:{&quot;line&quot;:152,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:152,&quot;column&quot;:36}},&quot;14&quot;:{&quot;start&quot;:{&quot;line&quot;:160,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:160,&quot;column&quot;:51}},&quot;15&quot;:{&quot;start&quot;:{&quot;line&quot;:161,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:161,&quot;column&quot;:33}},&quot;16&quot;:{&quot;start&quot;:{&quot;line&quot;:171,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:171,&quot;column&quot;:64}},&quot;17&quot;:{&quot;start&quot;:{&quot;line&quot;:185,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:185,&quot;column&quot;:33}},&quot;18&quot;:{&quot;start&quot;:{&quot;line&quot;:186,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:188,&quot;column&quot;:9}},&quot;19&quot;:{&quot;start&quot;:{&quot;line&quot;:187,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:187,&quot;column&quot;:19}},&quot;20&quot;:{&quot;start&quot;:{&quot;line&quot;:189,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:189,&quot;column&quot;:46}},&quot;21&quot;:{&quot;start&quot;:{&quot;line&quot;:190,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:190,&quot;column&quot;:36}},&quot;22&quot;:{&quot;start&quot;:{&quot;line&quot;:192,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:192,&quot;column&quot;:76}},&quot;23&quot;:{&quot;start&quot;:{&quot;line&quot;:194,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:202,&quot;column&quot;:9}},&quot;24&quot;:{&quot;start&quot;:{&quot;line&quot;:195,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:195,&quot;column&quot;:57}},&quot;25&quot;:{&quot;start&quot;:{&quot;line&quot;:196,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:196,&quot;column&quot;:69}},&quot;26&quot;:{&quot;start&quot;:{&quot;line&quot;:197,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:200,&quot;column&quot;:14}},&quot;27&quot;:{&quot;start&quot;:{&quot;line&quot;:201,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:201,&quot;column&quot;:27}},&quot;28&quot;:{&quot;start&quot;:{&quot;line&quot;:203,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:203,&quot;column&quot;:34}},&quot;29&quot;:{&quot;start&quot;:{&quot;line&quot;:216,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:216,&quot;column&quot;:22}},&quot;30&quot;:{&quot;start&quot;:{&quot;line&quot;:217,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:217,&quot;column&quot;:64}},&quot;31&quot;:{&quot;start&quot;:{&quot;line&quot;:218,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:218,&quot;column&quot;:30}},&quot;32&quot;:{&quot;start&quot;:{&quot;line&quot;:219,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:219,&quot;column&quot;:49}},&quot;33&quot;:{&quot;start&quot;:{&quot;line&quot;:220,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:220,&quot;column&quot;:51}},&quot;34&quot;:{&quot;start&quot;:{&quot;line&quot;:221,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:221,&quot;column&quot;:21}}},&quot;branchMap&quot;:{&quot;1&quot;:{&quot;line&quot;:122,&quot;type&quot;:&quot;if&quot;,&quot;locations&quot;:[{&quot;start&quot;:{&quot;line&quot;:122,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:122,&quot;column&quot;:8}},{&quot;start&quot;:{&quot;line&quot;:122,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:122,&quot;column&quot;:8}}]},&quot;2&quot;:{&quot;line&quot;:186,&quot;type&quot;:&quot;if&quot;,&quot;locations&quot;:[{&quot;start&quot;:{&quot;line&quot;:186,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:186,&quot;column&quot;:8}},{&quot;start&quot;:{&quot;line&quot;:186,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:186,&quot;column&quot;:8}}]},&quot;3&quot;:{&quot;line&quot;:186,&quot;type&quot;:&quot;binary-expr&quot;,&quot;locations&quot;:[{&quot;start&quot;:{&quot;line&quot;:186,&quot;column&quot;:12},&quot;end&quot;:{&quot;line&quot;:186,&quot;column&quot;:32}},{&quot;start&quot;:{&quot;line&quot;:186,&quot;column&quot;:36},&quot;end&quot;:{&quot;line&quot;:186,&quot;column&quot;:58}}]},&quot;4&quot;:{&quot;line&quot;:194,&quot;type&quot;:&quot;if&quot;,&quot;locations&quot;:[{&quot;start&quot;:{&quot;line&quot;:194,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:194,&quot;column&quot;:8}},{&quot;start&quot;:{&quot;line&quot;:194,&quot;column&quot;:8},&quot;end&quot;:{&quot;line&quot;:194,&quot;column&quot;:8}}]}}};
}
__cov_ycuTgTZmMYZ4lqID3Xabnw = __cov_ycuTgTZmMYZ4lqID3Xabnw[&#39;/home/travis/build/terrestris/BasiGX/src/view/combo/ScaleCombo.js&#39;];
__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;1&#39;]++;Ext.define(&#39;BasiGX.view.combo.ScaleCombo&#39;,{xtype:&#39;basigx-combo-scale&#39;,extend:&#39;Ext.form.field.ComboBox&#39;,requires:[],viewModel:{data:{fieldLabel:null,documentation:&#39;&lt;h2&gt;Maßstabswahl&lt;/h2&gt;\u2022 Wählen Sie mit Hilfe &#39;+&#39;dieser ComboBox den gewünschten Maßstab aus.&lt;br&gt;\u2022 Zoomen &#39;+&#39;Sie innerhalb der Karte, so aktualisiert sich die ComboBox &#39;+&#39;entsprechend mit dem aktuellen Maßstab&#39;}},bind:{fieldLabel:&#39;{fieldLabel}&#39;},queryMode:&#39;local&#39;,forceSelection:false,allowBlank:false,width:120,editable:false,displayField:&#39;scale&#39;,valueField:&#39;resolution&#39;,fields:[&#39;scale&#39;,&#39;resolution&#39;],boundEventKeys:[],map:null,config:{scales:[{scale:&#39;1:2.000.000&#39;,resolution:560},{scale:&#39;1:1.000.000&#39;,resolution:280},{scale:&#39;1:500.000&#39;,resolution:140},{scale:&#39;1:250.000&#39;,resolution:70},{scale:&#39;1:100.000&#39;,resolution:28},{scale:&#39;1:50.000&#39;,resolution:14},{scale:&#39;1:25.000&#39;,resolution:7},{scale:&#39;1:10.000&#39;,resolution:2.8},{scale:&#39;1:5.000&#39;,resolution:1.4},{scale:&#39;1:2.500&#39;,resolution:0.7},{scale:&#39;1:1.000&#39;,resolution:0.28},{scale:&#39;1:500&#39;,resolution:0.14}]},initComponent:function(){__cov_ycuTgTZmMYZ4lqID3Xabnw.f[&#39;1&#39;]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;2&#39;]++;var me=this;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;3&#39;]++;if(!me.map){__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;1&#39;][0]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;4&#39;]++;me.map=BasiGX.util.Map.getMapComponent().getMap();}else{__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;1&#39;][1]++;}__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;5&#39;]++;var mapView=me.map.getView();__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;6&#39;]++;var scaleStore=Ext.create(&#39;Ext.data.Store&#39;,{sorters:[{property:&#39;resolution&#39;,direction:&#39;DESC&#39;}],data:me.getScales()});__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;7&#39;]++;me.store=scaleStore;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;8&#39;]++;me.callParent();__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;9&#39;]++;me.setValue(mapView.getResolution());__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;10&#39;]++;me.on(&#39;select&#39;,me.onComboSelect,me);__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;11&#39;]++;var bufferedUpdateMapResChange=Ext.Function.createBuffered(me.updateComboOnMapChange,50,me);__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;12&#39;]++;var key=mapView.on(&#39;change:resolution&#39;,bufferedUpdateMapResChange);__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;13&#39;]++;me.boundEventKeys.push(key);},onDestroy:function(){__cov_ycuTgTZmMYZ4lqID3Xabnw.f[&#39;2&#39;]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;14&#39;]++;ol.Observable.unByKey(this.boundEventKeys);__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;15&#39;]++;this.boundEventKeys=[];},onComboSelect:function(combo,rec){__cov_ycuTgTZmMYZ4lqID3Xabnw.f[&#39;3&#39;]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;16&#39;]++;this.map.getView().setResolution(rec.get(&#39;resolution&#39;));},updateComboOnMapChange:function(evt){__cov_ycuTgTZmMYZ4lqID3Xabnw.f[&#39;4&#39;]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;17&#39;]++;var mapView=evt.target;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;18&#39;]++;if((__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;3&#39;][0]++,mapView.getAnimating)&amp;&amp;(__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;3&#39;][1]++,mapView.getAnimating())){__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;2&#39;][0]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;19&#39;]++;return;}else{__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;2&#39;][1]++;}__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;20&#39;]++;var resolution=mapView.get(evt.key);__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;21&#39;]++;var store=this.getStore();__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;22&#39;]++;var matchInStore=store.findExact(&#39;resolution&#39;,resolution)&gt;=0;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;23&#39;]++;if(!matchInStore){__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;4&#39;][0]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;24&#39;]++;var scale=this.getCurrentScale(resolution);__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;25&#39;]++;var dspScale=&#39;1:&#39;+Math.round(scale).toLocaleString();__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;26&#39;]++;var rec={scale:dspScale,resolution:resolution};__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;27&#39;]++;store.add(rec);}else{__cov_ycuTgTZmMYZ4lqID3Xabnw.b[&#39;4&#39;][1]++;}__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;28&#39;]++;this.setValue(resolution);},getCurrentScale:function(resolution){__cov_ycuTgTZmMYZ4lqID3Xabnw.f[&#39;5&#39;]++;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;29&#39;]++;var me=this;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;30&#39;]++;var units=me.map.getView().getProjection().getUnits();__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;31&#39;]++;var dpi=25.4/0.28;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;32&#39;]++;var mpu=ol.proj.METERS_PER_UNIT[units];__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;33&#39;]++;var scale=resolution*mpu*39.37*dpi;__cov_ycuTgTZmMYZ4lqID3Xabnw.s[&#39;34&#39;]++;return scale;}});
</pre>
</body>
</html>
